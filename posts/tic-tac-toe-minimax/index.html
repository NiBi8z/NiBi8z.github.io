<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Tic Tac Toe - AI with Minimax algorithm" /><meta name="author" content="NiBi" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction :" /><meta property="og:description" content="Introduction :" /><link rel="canonical" href="/posts/tic-tac-toe-minimax/" /><meta property="og:url" content="/posts/tic-tac-toe-minimax/" /><meta property="og:site_name" content="NiBi" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-08T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Tic Tac Toe - AI with Minimax algorithm" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@NiBi" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"NiBi"},"dateModified":"2022-07-23T10:45:09+00:00","datePublished":"2022-07-08T00:00:00+00:00","description":"Introduction :","headline":"Tic Tac Toe - AI with Minimax algorithm","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/tic-tac-toe-minimax/"},"url":"/posts/tic-tac-toe-minimax/"}</script><title>Tic Tac Toe - AI with Minimax algorithm | NiBi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="NiBi"><meta name="application-name" content="NiBi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/pp.jpeg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">NiBi</a></div><div class="site-subtitle font-italic">All my Write Ups are here !</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/NiBi8z" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Tic Tac Toe - AI with Minimax algorithm</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Tic Tac Toe - AI with Minimax algorithm</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/username">NiBi</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1657238400" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-07-08 </em> </span> <span> Updated <em class="timeago" data-ts="1658573109" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-07-23 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1521 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><h1 id="introduction-">Introduction :</h1><p>I was interested in artificial intelligence. So I challenged myself to make an artificial intelligence that wins every time at tic tac toe. First of all, how to do it? I read a lot about artificial intelligence. Here, there are two types of AI particularly interesting:</p><ul><li><a href="https://en.wikipedia.org/wiki/Reinforcement_learning">Reinforcement learning</a> : basically, we let the AI learn by itself, if it wins, we reward it. (it’s very schematized).</ul><p>The problem is that the AI has to play a lot for it to be reliable. So in theory it can make mistakes if it is not trained enough.</p><ul><li>AI with <a href="https://en.wikipedia.org/wiki/Minimax">Minimax</a>: Minimax is a basic decision making algorithm. It is simple to set up and will allow the AI to always make the right decision. Before playing each move, the AI will look at all the possibilities of the game to choose the best one. In a game like tic-tac-toe there are not many possibilities so the AI can study them all. The advantage is that the AI will never make a mistake because it will know all the possible situations. In tic-tac-toe, if you don’t make a mistake you can’t lose and you’ll make a tie at worst. If your opponent makes a mistake, you win. This algorithm is very useful, but it cannot be used in poker, for example, because there are too many possible hands. It will then be necessary to turn to Reinforcement learning because even if there will be a margin of error, the AI will learn and become stronger and stronger. Minimax optimization exists to use minimax even if there is many possibilities like the <a href="https://www.reddit.com/r/learnprogramming/comments/260s1y/algorithm_how_to_choose_an_appropriate_depth_for/">Depth Limited Minimax</a></ul><p>But before making an AI, we need a tic tac toe game !</p><h1 id="tic-tac-toe-">Tic tac toe !</h1><p>The different steps of tic-tac-toe : -Set up the graphical interface (with pygame) -Player 1 chooses where he wants to play -We check if the location is available -We draw the O or the X -We check for a win or a tie -Player 2’s turn</p><p>First, i made a class Game() which creates a matrix full of “-1” because all spaces are available. We set the player turns number to 0 (because player one will start, we can switch it to 1 if we want player 2 to start).</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Game</span><span class="p">():</span>
    <span class="n">pygame</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
    <span class="n">blue</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">189</span><span class="p">,</span><span class="mi">172</span><span class="p">)</span>
    <span class="n">screen</span><span class="o">=</span><span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">600</span><span class="p">,</span><span class="mi">600</span><span class="p">))</span>
    <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">"tic tac toe"</span><span class="p">)</span>
    <span class="n">screen</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="n">blue</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">board</span><span class="o">=</span><span class="p">[</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">player_number</span><span class="o">=</span><span class="mi">0</span>
</pre></table></code></div></div><p>We add a “show_board()” function to display the matrix.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>    <span class="k">def</span> <span class="nf">show_board</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">board</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></table></code></div></div><p>We create a “add_piece” function to add the new piece to the matrix</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">add_piece</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">player_number</span><span class="p">):</span>
        <span class="n">new_piece</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">user_play</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">player_number</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">board</span><span class="p">[</span><span class="n">new_piece</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">new_piece</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">=</span><span class="s">"X"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">board</span><span class="p">[</span><span class="n">new_piece</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">new_piece</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">=</span><span class="s">"O"</span>
</pre></table></code></div></div><p>“add_piece” calls “user_play()” which is a big function who let the user where he wants to play, who let the AI choose where to play and who check if the choosen space is available.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">user_play</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Player </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">player_number</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">, choose where do you place your piece (0,0)"</span><span class="p">)</span>
    <span class="c1">#res=input("&gt;&gt;")
</span>    <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">has_played</span><span class="o">=</span><span class="bp">False</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="p">.</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span><span class="o">==</span><span class="n">pygame</span><span class="p">.</span><span class="n">QUIT</span><span class="p">:</span>
                <span class="nb">exit</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">player_number</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">moove</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">MM</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">board</span><span class="p">,</span><span class="bp">False</span><span class="p">,</span><span class="bp">self</span><span class="p">.</span><span class="n">player_number</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">column</span><span class="o">=</span><span class="n">moove</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">line</span><span class="o">=</span><span class="n">moove</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">has_played</span><span class="o">=</span><span class="bp">True</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">show_board</span><span class="p">()</span>
                <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Choosen : (</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s">,</span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s">)"</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span><span class="o">==</span><span class="n">pygame</span><span class="p">.</span><span class="n">MOUSEBUTTONDOWN</span> <span class="ow">or</span> <span class="n">has_played</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">has_played</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
                    <span class="n">mouseX</span><span class="o">=</span><span class="n">event</span><span class="p">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">mouseY</span><span class="o">=</span><span class="n">event</span><span class="p">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">column</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">mouseY</span><span class="o">//</span><span class="mi">200</span><span class="p">)</span>
                    <span class="n">line</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">mouseX</span><span class="o">//</span><span class="mi">200</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">can_draw</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">column</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">player_number</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                        <span class="bp">self</span><span class="p">.</span><span class="n">draw_circle</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">column</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">player_number</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="p">.</span><span class="n">draw_cross</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">column</span><span class="p">)</span>
                    <span class="k">return</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">column</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">"Not here"</span><span class="p">)</span>
</pre></table></code></div></div><p>If the player number is 1 we can the MM() function which is the minimax algorithm but we will come back to this later. If the player number is 0 we wait for a user click. We divide the coordinates by 200 to have the correspondant box. We check if the box is available thanks to the “can_draw function”. If the box is available we draw the correpondant letter.</p><p>The “can_draw()” function will simply check if an box is available so if matrix[x][y] is equal to -1.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">can_draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">board</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">!=-</span><span class="mi">1</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></table></code></div></div><p>Now, a player can draw a new letter. Remember of our differents steps ! After the new piece we have to check if someone won.</p><p>Let’s make a “check_win()” function</p><p>this is a rather long but simple function. We look at all the possibilities of victory. We use pass the game_board as argument because our minimax algorithm will check the win for all possible gameboards, “game_board=0” means that if we don’t specify the game_board parameter then we check the current gameboard</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">check_win</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">game_board</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">game_board</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">game_board</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">board</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">game_board</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="s">"X"</span><span class="p">)</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">i</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="s">"O"</span><span class="p">)</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>


    <span class="k">if</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"X"</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span> <span class="ow">and</span> <span class="n">game_board</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s">"O"</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">is_full</span><span class="p">():</span>
        <span class="k">return</span> <span class="mi">3</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

</pre></table></code></div></div><p>We return 0 if player 1 won, 1 if player 2 won, 3 if the gameboard is full (tie) and -1 if nobody won.</p><p>We check if the gameboard is full with the “is_full()” function :</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">is_full</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">game_board</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">game_board</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">game_board</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">board</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">game_board</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></table></code></div></div><p>Let’s look at our different steps and now we just have to do the same thing again but for the next player!</p><p>We can therefore launch our game in the following way:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="n">play</span><span class="o">=</span><span class="n">Game</span><span class="p">()</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="p">.</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span><span class="o">==</span><span class="n">pygame</span><span class="p">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="nb">exit</span><span class="p">()</span>
    <span class="n">lines</span><span class="p">(</span><span class="n">play</span><span class="p">.</span><span class="n">screen</span><span class="p">)</span>
    <span class="n">play</span><span class="p">.</span><span class="n">show_board</span><span class="p">()</span>
    <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>

    <span class="n">play</span><span class="p">.</span><span class="n">add_piece</span><span class="p">(</span><span class="n">play</span><span class="p">.</span><span class="n">player_number</span><span class="p">)</span>  

    <span class="n">state</span><span class="o">=</span><span class="n">play</span><span class="p">.</span><span class="n">check_win</span><span class="p">()</span>

    <span class="n">play</span><span class="p">.</span><span class="n">player_number</span><span class="o">=</span><span class="p">(</span><span class="n">play</span><span class="p">.</span><span class="n">player_number</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span> <span class="c1">#We add 1 to the player number to change the turn.
</span>    <span class="n">my_font</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">font</span><span class="p">.</span><span class="n">SysFont</span><span class="p">(</span><span class="s">'Comic Sans MS'</span><span class="p">,</span> <span class="mi">140</span><span class="p">)</span>


    <span class="k">if</span> <span class="n">state</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Player </span><span class="si">{</span><span class="n">state</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s"> won !"</span> <span class="k">if</span> <span class="n">state</span><span class="o">!=</span><span class="mi">3</span> <span class="k">else</span> <span class="s">"Tie !"</span><span class="p">)</span>
        <span class="n">play</span><span class="p">.</span><span class="n">show_board</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">state</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">text_surface</span> <span class="o">=</span> <span class="n">my_font</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="s">'You won'</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">state</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">text_surface</span> <span class="o">=</span> <span class="n">my_font</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="s">'AI won'</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text_surface</span> <span class="o">=</span> <span class="n">my_font</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="s">'Tie'</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span> <span class="p">,</span><span class="mi">255</span><span class="p">))</span>

        <span class="n">Game</span><span class="p">.</span><span class="n">screen</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_surface</span><span class="p">,</span> <span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">break</span>
</pre></table></code></div></div><p>We have a tic tac toe game !</p><h1 id="the-minimax-algorithm">The minimax algorithm</h1><p>The implementation is quite simple.</p><p>We check all the possibilities. One player will maximize and the other one wil minimize. What does that mean ?</p><p>After checking a possibilities, if this possibilities result of a win for us and we are maximazing so this possibilities will be qual to +1. If a possibilities result of a loose for us, this possibilities will be equel to -1. In case of a tie, the possibilities will be equal to 0. Because we are maximazing, we will choose a random a possibility equal to +1.</p><p>Look at this image to understand better (The exemple maximize with +10 and minimize with -10 but it’s exactly the same ):</p><p><img data-src="../../assets/minimax.webp" alt="image" data-proofer-ignore></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">MM</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_board</span><span class="p">,</span> <span class="n">is_maximazing</span><span class="p">,</span><span class="n">player_number</span><span class="p">):</span>
    <span class="n">won</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">check_win</span><span class="p">(</span><span class="n">game_board</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">won</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="c1">#P0 won -&gt; maximazing
</span>        <span class="k">return</span> <span class="mi">1</span><span class="p">,</span><span class="mi">0</span>
    <span class="k">if</span> <span class="n">won</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="c1">#P1 won -&gt; minimazing
</span>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span>
    
    <span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">is_full</span><span class="p">(</span><span class="n">game_board</span><span class="p">):</span>
        <span class="c1">#Tie -&gt;  neutral
</span>        <span class="k">return</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>

    <span class="k">if</span> <span class="n">is_maximazing</span><span class="p">:</span>
        <span class="n">best_moove_number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">'-inf'</span><span class="p">)</span>
        <span class="n">best_move</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">possibles_mooves</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">get_possible_places</span><span class="p">(</span><span class="n">game_board</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span> <span class="ow">in</span> <span class="n">possibles_mooves</span><span class="p">:</span>
            <span class="n">temp_board</span> <span class="o">=</span> <span class="n">copy</span><span class="p">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">game_board</span><span class="p">)</span>
            <span class="n">temp_board</span><span class="p">[</span><span class="n">line</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="s">'X'</span> <span class="k">if</span> <span class="n">player_number</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="s">"O"</span>
            <span class="n">MM_status</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">MM</span><span class="p">(</span><span class="n">temp_board</span><span class="p">,</span> <span class="bp">False</span><span class="p">,(</span><span class="n">player_number</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">print</span><span class="p">(</span><span class="n">MM_status</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">MM_status</span> <span class="o">&gt;</span> <span class="n">best_moove_number</span><span class="p">:</span>
                <span class="n">best_moove_number</span> <span class="o">=</span> <span class="n">MM_status</span>
                <span class="n">best_move</span> <span class="o">=</span> <span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">best_moove_number</span><span class="p">,</span> <span class="n">best_move</span>

    <span class="k">elif</span> <span class="p">(</span><span class="n">is_maximazing</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
        <span class="n">best_moove_number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">'+inf'</span><span class="p">)</span>
        <span class="n">best_move</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">possibles_mooves</span> <span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">get_possible_places</span><span class="p">(</span><span class="n">game_board</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span> <span class="ow">in</span> <span class="n">possibles_mooves</span><span class="p">:</span>
            <span class="n">temp_board</span> <span class="o">=</span> <span class="n">copy</span><span class="p">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">game_board</span><span class="p">)</span>
            <span class="n">temp_board</span><span class="p">[</span><span class="n">line</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="s">'X'</span> <span class="k">if</span> <span class="n">player_number</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="s">"O"</span>
            <span class="n">MM_status</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">MM</span><span class="p">(</span><span class="n">temp_board</span><span class="p">,</span> <span class="bp">True</span><span class="p">,(</span><span class="n">player_number</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">print</span><span class="p">(</span><span class="n">MM_status</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">MM_status</span> <span class="o">&lt;</span> <span class="n">best_moove_number</span><span class="p">:</span>
                <span class="n">best_moove_number</span> <span class="o">=</span> <span class="n">MM_status</span>
                <span class="n">best_move</span> <span class="o">=</span> <span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">best_moove_number</span><span class="p">,</span> <span class="n">best_move</span>

</pre></table></code></div></div><p>MM take as argument a gameboard, True or False (if we are maximazing or not) and the current player number.</p><p>The function will call itself recursively and generate a new board until it gets a win, then choose the best move based on the current state.</p><p>Here, we use get_possible_places() to get all available boxes of a gameboard.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_possible_places</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">game_board</span><span class="p">):</span>
    <span class="n">places</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">game_board</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">game_board</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
            <span class="k">if</span> <span class="n">game_board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">==-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">places</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">places</span>
</pre></table></code></div></div><p>We also use copy.deepcopy(game_board) to copy the current gameboard and modify it without changing the current board. Because with python if you make gameboard2=gameboard and you modify gameboard2 then gameboard can also be modified.</p><h3 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>The complete code source is available on my github !</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ai/'>AI</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ai/" class="post-tag no-text-decoration" >AI</a> <a href="/tags/minimax/" class="post-tag no-text-decoration" >minimax</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"></div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/tic-tac-toe-minimax/">Tic Tac Toe - AI with Minimax algorithm</a><li><a href="/posts/cryptohack-no-way-jose/">CryptoHack - No way jose</a><li><a href="/posts/RSA-STARTER-06/">CryptoHack - RSA Starter 6</a><li><a href="/posts/salty/">CryptoHack - Salty</a><li><a href="/posts/manyprimes/">CryptoHack - Manyprimes</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/challenge/">Challenge</a> <a class="post-tag" href="/tags/crypto/">crypto</a> <a class="post-tag" href="/tags/rsa/">RSA</a> <a class="post-tag" href="/tags/math/">math</a> <a class="post-tag" href="/tags/modular-math/">modular math</a> <a class="post-tag" href="/tags/factorization/">factorization</a> <a class="post-tag" href="/tags/ctf/">CTF</a> <a class="post-tag" href="/tags/thm/">THM</a> <a class="post-tag" href="/tags/aes/">AES</a> <a class="post-tag" href="/tags/easy/">easy</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/THM-couch/"><div class="card-body"> <em class="timeago small" data-ts="1658880000" > 2022-07-27 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>THM - Couch</h3><div class="text-muted small"><p> Nmap First, we use nmap to find the open ports : 1 2 3 4 5 6 7 8 9 10 11 12 13 ┌──(kali㉿kali)-[~/Desktop] └─$ nmap -A 10.10.232.160 Starting Nmap 7.92 ( https://nmap.org ) at 2022-07-27 08:09 EDT ...</p></div></div></a></div><div class="card"> <a href="/posts/THM-Mustacchio/"><div class="card-body"> <em class="timeago small" data-ts="1658793600" > 2022-07-26 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>THM - Mustacchio</h3><div class="text-muted small"><p> Nmap As always, we start the enumeration with nmap : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 ┌──(kali㉿kali)-[~] └─$ nmap -A 10.10.93.229 Starting Nmap 7.92 ( https://nmap.org ) ...</p></div></div></a></div><div class="card"> <a href="/posts/ronwaswrong/"><div class="card-body"> <em class="timeago small" data-ts="1656201600" > 2022-06-26 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CryptoHack - Ron was Wrong, Whit is Right</h3><div class="text-muted small"><p> Instructions : Here’s a bunch of RSA public keys I gathered from people on the net together with messages that they sent. As excerpt.py shows, everyone was using PKCS#1 OAEP to encrypt their own ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ronwaswrong/" class="btn btn-outline-primary" prompt="Older"><p>CryptoHack - Ron was Wrong, Whit is Right</p></a> <a href="/posts/THM-Mustacchio/" class="btn btn-outline-primary" prompt="Newer"><p>THM - Mustacchio</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/username">NiBi</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."></span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/challenge/">Challenge</a> <a class="post-tag" href="/tags/crypto/">crypto</a> <a class="post-tag" href="/tags/rsa/">RSA</a> <a class="post-tag" href="/tags/math/">math</a> <a class="post-tag" href="/tags/modular-math/">modular math</a> <a class="post-tag" href="/tags/factorization/">factorization</a> <a class="post-tag" href="/tags/ctf/">CTF</a> <a class="post-tag" href="/tags/thm/">THM</a> <a class="post-tag" href="/tags/aes/">AES</a> <a class="post-tag" href="/tags/easy/">easy</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Nothing yet :(</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
